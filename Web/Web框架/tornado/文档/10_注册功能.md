```
#coding=utf-8

import tornado.web
import tornado.ioloop
import MySQLdb
from tornado.routing import URLSpec


def _getConn():
    return MySQLdb.connect(host='127.0.0.1',port=3306,user='root',passwd='123456',db='testlogin')



class RegisterHandler(tornado.web.RequestHandler):

    def initialize(self,conn):
        self.conn = conn

    def get(self, *args, **kwargs):
        with open('templates/register.html') as fr:
            content = fr.read()
        self.write(content)

    def post(self, *args, **kwargs):
        #获取请求参数
        account = self.get_argument('uname')
        pwd = self.get_argument('pwd')
        print account,pwd
        try:
            #连接数据库进行注册
            conn = self.conn
            cursor = conn.cursor()
            cursor.execute('insert into t_auser values(null,"%s","%s",now())'%(account,pwd))
            conn.commit()
            # self.redirect('/user/')
            print self.reverse_url('user')
            self.redirect(self.reverse_url('user'))
        except:
            conn.rollback()
            self.redirect('/register/')

class UserHandler(tornado.web.RequestHandler):
    def get(self, *args, **kwargs):
        self.write('注册成功！')

app = tornado.web.Application([
    (r'/register/',RegisterHandler,{'conn':_getConn()}),
    # (r'/user/',UserHandler),
    URLSpec(r'/fdsafdsa/',UserHandler,name='user'),


])

app.listen(8888)
tornado.ioloop.IOLoop.instance().start()
```

app = tornado.web.Application([
    ==(r'/register/',RegisterHandler,{'conn':_getConn()}),==
    # (r'/user/',UserHandler),
    ==URLSpec(r'/fdsafdsa/',UserHandler,name='user'),==


])
